#compdef es2panda

_es2panda() {
  local cur
  cur=${words[CURRENT]}

  if [[ $cur == --*: ]]; then
    local mainopt="${cur%%:*}"
    local subopts=()
    [[ $mainopt == --ets-warnings ]] && subopts=(disable enable werror)
    [[ $mainopt == --debugger-eval ]] && subopts=(line panda-files source)
    [[ $mainopt == --generate-decl ]] && subopts=(enabled path)
    [[ $mainopt == --ast-verifier ]] && subopts=(errors full-program json json-path phases warnings)
    for s in $subopts; do
      compadd -- "$mainopt:$s"
    done
    return
  fi
  local opts
  opts=(--es2panda --help --arktsconfig --extension --module --parse-only --dump-ast --dump-cfg --dump-dynamic-ast --dump-ast-only-silent --list-files --parse-jsdoc --dump-assembly --debug-info --dump-debug-info --opt-level --ets-module --eval-mode --ets-warnings --werror --enable --disable --debugger-eval --line --source --panda-files --generate-decl --enabled --path --emit-declaration --thread --dump-size-stat --output --log-level --stdlib --gen-stdlib --plugins --skip-phases --ast-verifier --warnings --errors --phases --full-program --json --json-path --list-phases --ets-unnamed --ets-path --exit-before-phase --exit-after-phase --dump-before-phases --dump-after-phases --dump-ets-src-before-phases --dump-ets-src-after-phases --bco-optimizer --bco-compiler --perm-arena --dump-perf-metrics --simultaneous)
  compadd -Q -a opts
}

compdef _es2panda es2panda
